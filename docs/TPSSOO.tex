\documentclass[a4paper,10pt,titlepage]{article}
\usepackage[paperwidth=180mm,paperheight=285mm,left=1.5cm,top=3cm,right=0.5cm,bottom=1cm,head=2.0cm,includefoot]{geometry}
\usepackage[a4,frame,center,noinfo,horigin=-0.75in]{crop}
\usepackage[utf8]{inputenc}
\usepackage[spanish,activeacute]{babel}
\usepackage{lastpage}
\usepackage{comment}
\usepackage{fancyhdr}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{bookman}
\usepackage{amsmath}
\usepackage{color}
\usepackage{longtable}
\usepackage{moreverb}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{ulem}
\usepackage[pdfborder={0 0 0 0}]{hyperref}
\usepackage{fixltx2e}
\usepackage{array}
\usepackage{float}
\restylefloat{table}
\usepackage{wrapfig}
\usepackage{soul}
\usepackage{t1enc}
\usepackage{textcomp}
\usepackage{marvosym}
\usepackage{latexsym}
\usepackage{amssymb}
\usepackage{hyperref}
\usepackage{slashbox} %slash para la tabla
\usepackage{colortbl} %tablas con colores
\usepackage{pdfpages} % to import PDF pages
\usepackage{xcolor}
\usepackage{titlesec}
\usepackage{rotating}


\renewcommand{\headrulewidth}{1pt}
\renewcommand{\footrulewidth}{1pt}
\renewcommand{\baselinestretch}{1.5}
%\titleformat{\section}[hang]{\Huge }{}{0px}{\centering \hspace{1ex}}{}

\begin{document}

\pagestyle{fancy}
%\chead{Grupo 7\\ }
\lhead{\includegraphics[scale=0.06]{./logos/logo_fiuba.pdf} 75-08 Sistemas Operativos}
\lfoot{Grupo 7}
\rfoot{ P\'agina \thepage \hspace{0.5pt} de \pageref{LastPage}}
\cfoot{$2^{do}$ Cuatrimestre 2012}
\tableofcontents
\newpage

%documento
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Estructura general de la carpeta	%
%	Caratula 
%	Planilla del Docente
%	Indice
%	Hip\'otesis y aclaraciones globales
%	Problemas Relevantes
%	Archivo README
%	Listado de Comandos y Funciones
%		-a
%		...
%		-g
%	Archivos
%		-a
%		-b
%		-c	
%	Ap\'endice A
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Planilla Docente} % Meter algun truco usando una imagen en vez de la tabla

%\section{Casos}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Hip\'otesis y Aclaraciones Globales}

Asumimos que todos los comandos se ejecutaran despues de haber sido inicializado el sistema con IniciarV5, exceptuando a InstalarV5. Esto es asi dado que se utilizan variables de entorno en los mismos. 


\section{Problemas Relevantes}

\subsection{Lectura de expresiones regulares del archivo de patrones}

Según el formato del archivo de patrones, la expresión regular a aplicar se ubica en el segundo campo de cada registro del archivo, pero encerrado entre comillas simples. Al leer esta expresión regular, es necesario quitar las comillas simples antes de ingresarlas al comando grep, sino el comportamiento era incorrecto: se interpretaban las comillas simples como caracteres buscados. Se solucionó con una función en el script BuscarV5.sh que recorta el primer y último carácter de un string.

Otro problema relevante fue la lectura de los registros del archivo de patrones. Es necesario usar el comanod read con el flag “-r” para que no interpretara caracteres de escape en las expresiones regulres.

\section{Archivo README}


Este es el README del trabajo práctico correspondiente al segundo cuatrimestre del año 2012 de la materia 75.08 Sistemas Operativos, grupo 7.
 
ARCHIVOS DEL PROYECTO
 
El proyecto consiste en un software para procesar archivos que contienen información de logueo provenientes de diferentes sistemas. El programa valida los archivos, aplica patrones de busqueda y genera archivos de resultados con las coincidencias. Tambien mueve los archivos procesados a otras carpetas de almacenamiento de archivos procesados con éxito. Permite efectuar consultas sobre lo procesado, y generar reportes.

Los archivos correspondientes al proyecto son los siguientes:

- InstalaV5.sh es el modulo de instalacion.

- arch-sistema.dat: contiene los ejecutables y modulos desarrollados.

INSTALACION

Insertar el dispositivo de almacenamiento con el contenido del trabajo práctico.

Crear en el directorio corriente un directorio de trabajo llamado grupo07.

Copiar el archivo *.tgz dentro del directorio grupo07.

Descomprimir el *.tgz, con el comando "tar -xvf *.tgz".

Correr el script InstalaV5.sh y seguir los pasos indicandos por el mismo.

Existen dos modos para llevar a cabo la instalacion del sistema V-FIVE:

-Completa

-Por componentes 

Para realizar una instalacion completa solo corra el script InstalaV5 normalmente.

Para llevar a cabo la instalacion por componentes se debe invocar al script del siguiente modo:

\begin{verbatim}
./InstalaV5.sh <nombre_componente1> <nombre_componente2> ...
\end{verbatim}

Se pueden instalar mas de un componente de una sola vez solo indicando sus nombres.

Ej: ./InstalaV5.h IniciarV5 patrones

Se puede ir instalando componente por componente para hasta llegar a una instalacion completa del sistema, aunque solo en la primera instalacion por componentes se le pedira al usuario que defina los nombres de los directorios del sistema.

Para visualizar los componentes instalados se puede correr el script de instalacion nuevamente. Si el sistema esta completo
solo exhibira los componentes instalados y finalizara,en cambio hubiera alguno faltante le pedira al usuario si desea completar la instalacion.

REQUERIMIENTOS

Para la correcta instalación, se deberá tener instalado Bash versión 3 o superior, y Perl version 4 o superior.

Los archivos que quedaran en el sistema del usuario son:

- IniciarV5.sh se guardara en la carpeta del grupo.

- InstalaV5.conf en la carpeta de configuraciones definida por CONFDIR.

- Los ejecutables en la carpeta definida por el usuario en BINDIR.

- El log de la instalación en la carpeta definida por LOGDIR

INTRODUCCCION

Luego de la instalacion, se debe inicializar las variables de entorno del sistema con el comando IniciarV5 de esta forma:

. ./Iniciar.sh

Hecha la inicializacion, el demonio se ejecuta. Se pueden obtener reportes de los resultados producidos en las busquedas mediante el comando ListarV5 y consultar los logs con MirarV5.

Para frenar la ejecución del demonio, se debe ejecutar el script StopD.sh

\newpage

\section{Listado de Comandos y Funciones}
%a. Nombre
%b. Justificación, solo si el comando fue agregado por Uds. (se debe explicar para que se lo
%usa y dónde)
%c. Archivos de Input, Intermedios y de Output
%d. Parámetros y Opciones
%e. Invocación Manual y/o automática con ejemplos
%f. Hipótesis y Aclaraciones especificas del comando
%g. Código fuente

	\subsection{InstalaV5}
%BEGIN subsection
		\subsubsection{Usos}
			
Instala el sistema en el equipo. Puede instalarlo por completo o por componentes.

		\subsubsection{Archivos}
			\begin {itemize}
				\item \textbf{Input} {arch-instalar.dat}
				\item \textbf{Intermedios} {Archivos temporales para hacer operaciones auxiliares en el almacenamiento de la configuración del sistema.}
				\item \textbf{Output} {InstalaV5.conf, y todos los modulos ejecutables}
			\end{itemize}

		\subsubsection{Par\'ametros y Opciones}
			\begin {itemize}
				\item \textbf{<nombre\_del\_modulo>} {Instala de forma separada el modulo que se le indique.}
			\end{itemize}
	
		\subsubsection{Invocaci\'on Manual/Autom\'atica con ejemplos}

Para instalar el sistema por completo:

\begin{verbatim}
./InstalaV5.sh
 \end{verbatim}

Para instalar algun modulo:

\begin{verbatim}
./InstalaV5.sh BuscarV5.sh
 \end{verbatim}

		\subsubsection{Hip\'otesis y Aclaraciones del Comando}

El modulo IniciarV5 creará todas las carpetas aun cuando se ordene una instalacion parcial.


		\subsubsection{C\'odigo Fuente}
			Anexo al final.
%END subsection


	\subsection{DetectaV5}
%BEGIN subsection
		\subsubsection{Usos}
		Este comando es el encargado de procesar los archivos presentes en la carpeta de \textbf{arribos}, verificando que tengan un formato correcto, es decir, que se correspondan con alg\'un sistema y a su vez, la fecha comunicada en su nombre para dicho sistema sean las correctas. 

	En caso de que los archivos sean v\'alidos, los mueve al directorio de \textbf{aceptados}. En caso contrario, son movidos al directorio de \textbf{rechazados}. 

		Una vez realizados estos pasos, invoca al comando BuscarV5.

		El comando DetectaV5 se ejecuta en forma de demonio, por lo que una vez terminado un ciclo, se duerme por un tiempo \$SLEEPTIME.			 

		\subsubsection{Archivos}
			\begin {itemize}
				\item \textbf{Input} {Todo archivo presente en \$ARRDIR }
				\item \textbf{Intermedios} {Ninguno}
				\item \textbf{Output} {Redistribuye los archivos de input entre \$ACEPDIR y \$RECHDIR, seg\'un corresponda.}
			\end{itemize}

		\subsubsection{Par\'ametros y Opciones}
			\begin {itemize}
				\item \textbf{Par\'ametros: }{Ninguno}
				\item \textbf{Opci\'ones: } {\textit{-h}: Muestra el mensaje de ayuda para el comando.}
			\end{itemize}
	
		\subsubsection{Invocaci\'on Manual/Autom\'atica con ejemplos}
			No es ejecutado manualmente. 

			Su ejecuci\'on est\'a a cargo del comando IniciarV5, a trav\'es del comando StartD.
			\begin{verbatim}
				Demonizado: nohup DetectaV5.sh 0<\&- 1>/dev/null 2>\&1 \&
			\end{verbatim}


		\subsubsection{C\'odigo Fuente}
			Anexo al final.
%END subsection

	\subsection{BuscarV5}
%BEGIN subsection
		\subsubsection{Usos}
			 

		\subsubsection{Archivos}
			\begin {itemize}
				\item \textbf{Input} {Los archivos que sean aceptados y que se encuentren en el directorio de aceptados, el archivo de configuración producido por el modulo de inicialización, y el archivo de patrones.}
				\item \textbf{Intermedios} {No produce.}
				\item \textbf{Output} {los archivos de resultados detallados y globales para los patrones. Se guardaran en la carpeta de procesados.}
			\end{itemize}

		\subsubsection{Par\'ametros y Opciones}
			 No posee argumentos de ejecución ni opciones. Cuando se ejecuta, comienza a procesar los archivos.
	
		\subsubsection{Invocaci\'on Manual/Autom\'atica con ejemplos}
Es automática por el módulo DetectarV5. 

No lleva parámetros, asi que tan sólo es necesaria su ejecución de la forma:
			\begin{verbatim}
				\$BINDIR/BuscarV5.sh
			\end{verbatim}

		\subsubsection{C\'odigo Fuente}
			Anexo al final.
%END subsection

	\subsection{ListarV5}
%BEGIN subsection
		\subsubsection{Usos}
			 
El enunciado requería la opción de poder filtrar los resultados seleccionando los distintos patrones, ciclos y archivos. Quisimos mantener una forma flexible de filtrado pero sin requerír cargar todos los archivos en memoria en el script. Tomando eso en cuanto, se hace una primera iteración sobre los archivos de resultado para obtener las diferentes opciones de filtrados, que pueden ser combinadas de cualquier manera, y luego una segunda iteración para mostrar los resultados aplicando los filtros seleccionados.

		\subsubsection{Archivos}
			\begin {itemize}
				\item \textbf{Input} {Los archivos de resultados detallados y globales generados por el comando BuscarV5.sh que se encuentran en el directorio de procesados.}
				\item \textbf{Intermedios} {No produce}
				\item \textbf{Output} {Dependiendo de un parametro (-x), genera el informe de los archivos de resultado aplicando los filtros seleccionados en un archivo de salida en el directorio de reportes.}
			\end{itemize}



		\subsubsection{Par\'ametros y Opciones}
		
Sin parámetros, la apliación muestra información y filtros sobre los resultados globales.
	
		\subsubsection{Invocaci\'on Manual/Autom\'atica con ejemplos}

\begin{verbatim}

# $BINDIR/ListarV5.pl -h
Uso: ListarV5 [opciones]

 -g, -global          (default) Consultar los resultados globales.
 -r, -resultado       Consultar los resultados detallados.
                      Implica no global.
 -x, -salida          Grabar el informe en un archivo en lugar de
                      imprimirlo en pantalla.
\end{verbatim}

		\subsubsection{Ejemplos de invocación:}

\begin{verbatim}
$BINDIR/ListarV5.pl -r 
\end{verbatim}


		\subsubsection{C\'odigo Fuente}
			Anexo al final.
%END subsection

	\subsection{IniciarV5}
%BEGIN subsection
		\subsubsection{Usos}

El usuario lo ejecuta manualmente para inicializar las variables de entorno, por ejemplo, BINDIR, LOGDIR, etc. Despues de inicializar el entorno inicia el demonio DetectarV5. Es obligatorio ejecutarlo despues de la instalacion.

		\subsubsection{Archivos}
			\begin {itemize}
				\item \textbf{Input} {Lee el archivo InstalaV5.conf}
				\item \textbf{Intermedios} {No produce}
				\item \textbf{Output} {No produce}
			\end{itemize}

		\subsubsection{Par\'ametros y Opciones}
			\begin {itemize}
				\item \textbf{-inicializado} {Opcional. Si se utiliza este flag, el modulo devolvera un codigo de retorno distinto dependiendo del estado de la inicializacion del sistema. Si esta inicializado, devuelve 1, sino, devuelve 0.}
			\end{itemize}
	
		\subsubsection{Invocaci\'on Manual/Autom\'atica con ejemplos}

Para inicializar el sistema:

\begin{verbatim}
 $BINDIR/IniciarV5.sh 
\end{verbatim}

Para preguntar si el sistema esta inicializado:

\begin{verbatim}
 $BINDIR/IniciarV5.sh -inicializado
\end{verbatim}

Y es necesario guardar el codigo de retorno.


		\subsubsection{C\'odigo Fuente}
			Anexo al final.
%END subsection

	\subsection{LoguearV5}
%BEGIN subsection
		\subsubsection{Usos}

Lo utilizan los modulos para registrar mensajes al archivo de log de cada modulo.

		\subsubsection{Archivos}
			\begin {itemize}
				\item \textbf{Input} {El script utiliza un archivo para obtener un template de mensaje de error. Dicho archivo se llama ListaErrores y se debe encontrar en el directorio BINDIR.}
				\item \textbf{Intermedios} {No produce}
				\item \textbf{Output} {La salida del log estara situada en la ruta LOGDIR/comando\_invocante.LOGEXT.}
			\end{itemize}

		\subsubsection{Par\'ametros y Opciones}
{\bf Parametros obligatorios:}
			\begin {itemize}
				\item \textbf{-f FUNC} {Este parametro indica la funcion invocante. Del mismo se desprende la ruta de salida de log.}
				\item \textbf{-c CODE} { Este parametro indica el codigo de error que se quiere loguear. El mismo se utiliza para determinar el mensaje de error a mostrar. Dicho mensaje se toma desde ListaErrores. La convencion de codigos de error se encuentra explicitadas en el archivo de ListarErrores.}
				\item \textbf{-i EST } {Es el estado del error a loguear. Puede ser I (informativo), A (alerta), E (error) y SE (error severo)}
			\end{itemize}

{\bf Parametro opcionales:} Son todos los parametros adicionales necesarios para imprimir el template del mensaje. Sin los mismos, no se podra hacer la impresion del log.
	
		\subsubsection{Invocaci\'on Manual/Autom\'atica con ejemplos}

\begin{verbatim}
$./LoguearV5.sh -f  
\end{verbatim}

		\subsubsection{C\'odigo Fuente}
			Anexo al final.

%END subsection

	\subsection{MirarV5}
%BEGIN subsection
		\subsubsection{Usos}

Lo utiliza el usuario para observar los archivos de logs en un formato amigable.
			 
		\subsubsection{Archivos}
			\begin {itemize}
				\item \textbf{Input} {Los archivos de logs presentes en LOGDIR}
				\item \textbf{Intermedios} {No produce}
				\item \textbf{Output} {No produce}
			\end{itemize}

		\subsubsection{Par\'ametros y Opciones}
			\begin {itemize}
				\item \textbf{-n LINEAS} {Indica la cantidad de lineas a mostrar en pantalla.}
				\item \textbf{-p PATRON} {Aplica una expresion regular para filtrar el log.}
				\item \textbf{-s SEPARADOR} {Establece el caracter separador del archivo de log a procesar.}
			\end{itemize}
	
		\subsubsection{Invocaci\'on Manual/Autom\'atica con ejemplos}

Lo invoca el usuario manualmente, por ejemplo, de esta forma:

\begin{verbatim}
MirarV5 -n 10 -p sasapp -s , -f resultados.3
\end{verbatim}

		\subsubsection{Hip\'otesis y Aclaraciones del Comando}

Cuando se invoca este comando se debe indicar el caracter separador correspondiente al archivo de log que se quiere mostrar. El modulo de logueo aplica un separador por defecto (punto y coma), pero este puede cambiarse por otro mediante el flag -s. Luego, al intentar mostrarlo mediante este comando, es obligatorio indicar el separador utilizado, en caso contrario, no se indicaran los resultados de forma correcta.


		\subsubsection{C\'odigo Fuente}
			Anexo al final.

%END subsection

	\subsection{MoverV5}
%BEGIN subsection
		\subsubsection{Usos}
			Se utiliza en los movimientos de archivos dentro del sistema. Todo comando que mueva archivos de una carpeta a otra, debe hacerlo a trav\'es de MoverV5.

			Tiene como caracter\'istica por sobre el comando nativo de shell, la validaci\'on de los par\'ametros, y el auto renombramiento en secuencia en caso de que el archivo de origen ya exista en la carpeta destino.

		\subsubsection{Archivos}
			\begin {itemize}
				\item \textbf{Input } {Archivo de Origen, Ruta de Destino}
				\item \textbf{Intermedios } {Ninguno}
				\item \textbf{Output } {El directorio Destino ahora contiene el Archivo de Origen. La ruta de origen ya no contiene el archivo.}
			\end{itemize}

		\subsubsection{Par\'ametros y Opciones}
			\begin {itemize}
				\item \textbf{Par\'ametros} {
					\begin{itemize}
						\item {@arg1 }{Archivo de Origen (ruta completa)} 
						\item {@arg2 }{Ruta de Destino } 
						\item {@arg3 }{Comando Invocante} 
						\item {@arg4 }{Opcional} 
					\end{itemize}
				}
				\item \textbf{Opciones}{
					\begin{itemize}
						\item {-h }{Muestra la ayuda del comando} 
						\item {-l }{Habilita el logueo de los movimientos} 
					\end{itemize}
				}
			\end{itemize}
	
		\subsubsection{Invocaci\'on Manual/Autom\'atica con ejemplos}
			Puede invocarse manualmente, aunque su forma normal de invocaci\'on es desde otros comandos (por ej: DetectaV5, BuscarV5, etc.)
			\begin{verbatim}
				\$BINDIR/MoverV5.sh <Origen> <Destino> <Comando> [OPCION]
			\end{verbatim}


		\subsubsection{C\'odigo Fuente}
			Anexo al final.
%END subsection

	\subsection{StartD}
%BEGIN subsection
		\subsubsection{Usos}
			Permite la ejecuci\'on sencilla de comandos en modos demonio o segundo plano. Puede disparar cualquier comando, reciba este argumentos o no, en primer plano, segundo plano o demonizado.

		\subsubsection{Archivos}
			\begin {itemize}
				\item \textbf{Input } {Ninguno}
				\item \textbf{Intermedios } {Ninguno}
				\item \textbf{Output } {Ninguno}
			\end{itemize}

		\subsubsection{Par\'ametros y Opciones}
			\begin {itemize}
				\item \textbf{Par\'ametros} {
					\begin{itemize}
						\item {@arg1 }{Opci\'on forma de ejecuci\'on} 
						\item {@arg2 }{Nombre del comando a ejecutar} 
						\item {@arg3 }{Opcional, argumentos del comando a ejecutar} 
					\end{itemize}
				}
				\item \textbf{Opciones}{
					\begin{itemize}
						\item {-h }{Muestra la ayuda del comando} 
						\item {-F }{Ejecuta @arg2 en primer plano} 
						\item {-B }{Ejecuta @arg2 en segundo plano}
						\item {-D }{Ejecuta @arg2 demonizado}
					\end{itemize}
				}
			\end{itemize}
	
		\subsubsection{Invocaci\'on Manual/Autom\'atica con ejemplos}
			Se invoca desde el comando IniciarV5, para disparar el comando DetectaV5 en forma de demonio.
				
			\begin{verbatim}
				\$BINDIR/StartD.sh [OPCION] <NombreComando.sh> <Argumentos>
			\end{verbatim}

		\subsubsection{Hip\'otesis y Aclaraciones del Comando}
			\begin{itemize}
				\item {}{Siempre debe aclararse el formato de ejecuci\'on (F, B o D).}
				\item{}{En caso de ejecutar el comando @arg2 en primer plano, StartD no termina hasta que el comando invocado termine}

			\end{itemize}


		\subsubsection{C\'odigo Fuente}
			Anexo al final.

%END subsection

	\subsection{StopD}
%BEGIN subsection
		\subsubsection{Usos}

		Busca si el comando cuyo nombre se recibe como argumento se encuentra en ejecuci\'on y termina todos los procesos activos de dicho comando.


		\subsubsection{Archivos}
			\begin {itemize}
				\item \textbf{Input } {Ninguno}
				\item \textbf{Intermedios } {Ninguno}
				\item \textbf{Output } {Ninguno}
			\end{itemize}

		\subsubsection{Par\'ametros y Opciones}
			\begin {itemize}
				\item \textbf{Par\'ametros} {
					\begin{itemize}
						\item {@arg1 }{Nombre del comando a detener}
					\end{itemize}
				}
				\item \textbf{Opciones}{
					\begin{itemize}
						\item {-h }{Muestra la ayuda del comando} 
					\end{itemize}
				}

			\end{itemize}
	
		\subsubsection{Invocaci\'on Manual/Autom\'atica con ejemplos}
			Se ejecuta desde el comando DetenerV5 para frenar la ejecuci\'on del sistema. 
	
			 Puede llamarse manualmente para detener procesos en particular.

			\begin{verbatim}
				\$BINDIR/StopD.sh <NombreComando.sh>
			\end{verbatim}


		\subsubsection{C\'odigo Fuente}
			Anexo al final.
%END subsection

	\subsection{DetenerV5}
%BEGIN subsection
		\subsubsection{Usos}
			Detiene todos los procesos en ejecuci\'on propios del sistema, elimina todas las variables de ambiente, y limpia la variable PATH.
			Tambi\'en como el IniciarV5, se debe invocar en foregroud, es decir:

			\begin{verbatim}
				. ./DetenerV5.sh
			\end{verbatim}
		
		\subsubsection{Justificaci\'on}
			As\'i como IniciarV5 se encarga de disparar los procesos propios del funcionamiento del sistema, este comando DetenerV5 automatiza el uso de StopD para eliminar todos los procesos en ejecuci\'on (por ej, DetectaV5 o BuscarV5). 

		\subsubsection{Archivos}
			\begin {itemize}
				\item \textbf{Input } {Ninguno}
				\item \textbf{Intermedios } {Ninguno}
				\item \textbf{Output } {Ninguno}
			\end{itemize}

		\subsubsection{Par\'ametros y Opciones}
			\begin {itemize}
				\item \textbf{Par\'ametros} { Ninguno }
				\item \textbf{Opciones}{
					\begin{itemize}
						\item {-h }{Muestra la ayuda del comando} 
					\end{itemize}
				}
			\end{itemize}
	
		\subsubsection{Invocaci\'on Manual/Autom\'atica con ejemplos}
			Se invoca manualmente para detener la ejecuci\'on del sistema.
			\begin{verbatim}
				\$BINDIR/DetenerV5.sh
			\end{verbatim}

		\subsubsection{C\'odigo Fuente}
			Anexo al final.
%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Archivos}
% Si ya están definidos en el enunciado
% a. Directorio, nombre y estructura
% Si son nuevas estructuras
% a. Nombre del Archivo y tipo de archivo (permanente o temporal)
% b. Justificación
% c. Estructura

	\subsection{Definidos en Enunciado}
		
		\subsubsection{InstalaV5.conf}

			\begin {itemize}
				\item \textbf{Tipo} {Archivo de Instalaci\'on}
				\item \textbf{Directorio} {CONFDIR}
				\item \textbf{Estructura} {\textit{	Variable=Valor=Usuario=Fecha}\\
					Donde: \ 
					\begin{table}[H]
					\centering
					\begin{tabular}{| c | c | c |}
						\hline
						Campos 	& Descripcion & Valor \\
						\hline
						\multirow{6}{*}{Variable} & \multirow{6}{*}{Caracteres}	& GRUPO, CONFIR, BINDIR, \\
								{}			  & {}							 & MAEDIR, ARRIDIR, ACEPDIR, \\
								{}			& 	{}						& RECHDIR, PROCDIR, REPODIR, \\
								{}			& {}  							& LOGDIR, LOGEXT, LOGSIZE, \\
								{}			& 	{}						& DATASIZE, SECUENCIA1, SECUENCIA2, \\
								{}			& {} 							& COMANDO, ARCHIVO, DIRECTORIOS\\ 
						\hline 
						Valor 	& Caracteres 	& Contenido de la variable \\
						\hline
						\multirow{2}{*}{Usuario} & Caracteres & Login del usuario que realiza la grabacion. \\
											 &			&\small{ *COMANDO, ARCHIVO y DIRECTORIOS no guardan usuario}\\
						\hline
						Fecha	& dd/mm/aaaa hh:mm 	&	Fecha y hora del momento de registro. \\
						\hline
	
					\end{tabular}
					\end{table}
				}
			\end{itemize}
		
		\subsubsection{<Comando>.logext}

			\begin {itemize}
				\item \textbf{Tipo} {Archivo de Log}
				\item \textbf{Directorio} {LOGDIR}
				\item \textbf{Estructura} {	\textit{Fecha;Usuario;TipoMensaje;Comando;Mensaje}\\
					Donde: \ 
					\begin{table}[H]
					\centering
					\begin{tabular}{| c | c | c |}
						\hline
						Campos 	& Descripcion & Valor \\
						\hline
							Fecha  &dd/mm/aaaa &	Fecha del día de registro. \\
						\hline 
						 Usuario & Caracteres 	&  Login del usuario que graba el registro\\
						\hline
						Tipo de Mensaje	 &	Caracteres	& 	I, A, E, SE \\
						\hline
						Comando & Caracteres & Nombre del comando que produce el evento de log \\
						\hline
						Mensaje &  Caracteres & Mensajes estandarizados provenientes de ListaErrores \\
							\hline

					\end{tabular}
					\end{table}
				}
			\end{itemize}

		\subsubsection{Patrones}

			\begin {itemize}
				\item \textbf{Tipo} {Archivo Maestro}
				\item \textbf{Directorio} {MAEDIR}
				\item \textbf{Estructura} {\textit{ID,REGEXP,SIS\_ID,Contexto,InicioContexto,FinContexto}\\
					Donde: \ 
					\begin{table}[H]
					\centering
					\begin{tabular}{| c | c | c |}
						\hline
						Campos 	& Tipo & Variable\\
						\hline
							ID patrón  & Numérico & PAT\_ID \\
						\hline 
						 REGXEP a aplicar& Caracteres 	& PAT\_EXP\\
						\hline
						Código Sistema  &	Caracteres	& SIS\_ID\\
						\hline
						Contexto del Resultado & Caracter (C , L ) & PAT\_CON\\
						\hline
						Inicio del Contexto & Numérico & DESDE\\
							\hline
						Fin del Contexto & Numérico & HASTA\\
							\hline

					\end{tabular}
					\end{table}
				}
			\end{itemize}

		\subsubsection{Sistemas}

			\begin {itemize}
				\item \textbf{Tipo} {Archivo Maestro}
				\item \textbf{Directorio} {MAEDIR}
				\item \textbf{Estructura} {\textit{SIS\_ID;NombreSistema;FechaDeAlta;FechaDeBaja$^*$}\\
					Donde: (	$^*$campo  cd ..opcional )\ 
					\begin{table}[H]
					\centering
					\begin{tabular}{| c | c | c |}
						\hline
						Campos 	& Tipo & Variable\\
						\hline
							Código de Sistema & Caracteres & SIS\_ID \\
						\hline 
						 Nombre de Sistema & Caracteres 	& SIS\_NOM\\
						\hline
						Fecha de Alta & aaaa-mm-dd & SIS\_ALTA\\
						\hline
						Fecha de Baja $^*$& aaaa-mm-dd & SIS\_BAJA\\
						\hline
					\end{tabular}
					\end{table}
				}
			\end{itemize}


		\subsubsection{rglobales.PAT\_ID}

			\begin {itemize}
				\item \textbf{Tipo} {Archivo de resultados}
				\item \textbf{Directorio} {PROCDIR}
				\item \textbf{Estructura} {\textit{Ciclo de busqueda, Nombre del archivo, expresion regular, contexto, desde, hasta, cantidad de hallazgos}\\
					Donde: \ 
					\begin{table}[H]
					\centering
					\begin{tabular}{| c | c | c |}
						\hline
						Campos 	& Tipo & Fuente o Variable correspondiente \\
						\hline
							Ciclo de busqueda  & Numérico & SECUENCIA2 \\
						\hline
							Nombre del archivo  & Caracteres & Archivo procesado \\
						\hline
							Expresion regular  & Caracteres & Archivo de patrones \\
						\hline
							Contexto de resultado  & Caracteres & Archivo de patrones \\
						\hline
							Desde  & Numérico & Archivo de patrones \\
						\hline
							Hasta  & Numérico & Archivo de patrones \\
						\hline
							Cantidad de hallazgos  & Numérico & Archivo procesado \\
						\hline    
					\end{tabular}
					\end{table}
				}
			\end{itemize}


		\subsubsection{resultados.PAT\_ID}

			\begin {itemize}
				\item \textbf{Tipo} {Archivo de resultados}
				\item \textbf{Directorio} {PROCDIR}
				\item \textbf{Estructura} {\textit{Ciclo de busqueda, Nombre del archivo, numero de registro, resultado}\\
					Donde: \ 
					\begin{table}[H]
					\centering
					\begin{tabular}{| c | c | c |}
						\hline
						Campos 	& Tipo & Fuente o Variable correspondiente \\
						\hline
							Ciclo de busqueda  & Numérico & SECUENCIA2 \\
						\hline
							Nombre del archivo  & Caracteres & Nombre del archivo procesado \\
						\hline
							Numero de registro  & Numérico & Archivo procesado \\
						\hline
							resultado  & Caracteres & Archivo procesado \\
						\hline
					\end{tabular}
					\end{table}
				}
			\end{itemize}

En el caso de procesar un contexto linea, se agregan al archivo tantos registros com lineas se indiquen segun los campos DESDE y HASTA. En el caso de un contexto caracter, siempre se agrega un solo registro.

		\subsubsection{salida\_xxx}

			\begin {itemize}
				\item \textbf{Tipo} {Archivo de Reportes}
				\item \textbf{Directorio} {REPODIR}
				\item \textbf{Estructura} {\textit{Es un archivo de texto libre, en donde la salida está dividida por patrón y los filtros aplicados en cada patrón. Por cada patrón hay un listado de 3 columnas de campo fijo, donde la primera es el ciclo (10 caracteres), la segunda es el archivo (25 caracteres) y la tercera es el registro RESULTADO del archivo de resultados detallados (sin límite).}\\
					Donde: (	$^*$campo  opcional )\ 
					\begin{table}[H]
					\centering
					\begin{tabular}{| c | c | c |}
						\hline
						Campos 	& Descripción & Fuente	\\
						\hline
							Línea de Reporte  & Caracteres & Proceso Listar\\
						\hline 
						
					\end{tabular}
					\end{table}
				}
			\end{itemize}
	

	\subsection{Auxiliares}
	
		\subsubsection{ListaErrores}
	
No especificado en el enunciado. Desarrollado por el equipo para almacenar los mensajes de logueo que usan los módulos, y su formato.

			\begin {itemize}
				\item \textbf{Tipo} {Archivo auxiliar de Logueo}
				\item \textbf{Directorio} {LoguearV5}
				\item \textbf{Estructura} {\textit{MSJ\_ID MensajeDeError}\\
					Donde: \ 
					\begin{table}[H]
					\centering
					\begin{tabular}{| c | c | c |}
						\hline
						Campos 	& Tipo & Variable\\
						\hline
						\multirow{2}{*}{MSJ\_ID } & \multirow{2}{*}{Caracteres} & Número de ID del Mensaje\\
						{} & {} & Una secuencia XYY por comando \\
						\hline 
						\multirow{2}{*}{Mensaje de Error} & \multirow{2}{*}{Caracteres} & Mensaje Normalizado \\ 
						{} & {} &  Puede recibir parámetros \\
						\hline
					\end{tabular}
					\end{table}
				}
			\end{itemize}

\textbf{Justificación:}  este archivo contiene los posibles mensajes de logueo, de forma que el log sea coherente al registrar mensajes con el mismo propósito provenientes de distintos módulos. Para usarlo, cada módulo debe referenciar el mensaje segun un identificador. Si el mensaje llevara nombres o variables, se debe escribir ``\%s'' en los lugares del mensaje que correspondan, y luego pasar esas variables como parámetros extra al usar el módulo de logueo.


%%%%%%%%%%%%%%%%%%%%%

\newpage

\section{Ap\'endice A}


\end{document}
